{"ast":null,"code":"var _jsxFileName = \"/home/saswat/Documents/Django/Shareme/frontend/src/Components/posts/details.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useRef } from 'react';\nimport { useLocation, useNavigate } from 'react-router';\nimport { Link } from 'react-router-dom';\nimport Loading from '../basic/loading';\nimport { PostContext } from '../../app';\nimport { useContext } from 'react';\nimport AxiosRequest from '../../axios';\nimport ReviewMangement from './details/comments';\nimport Operations from './details/operations';\nimport { DecodeToken } from '../token_decode';\nimport LikeCommentsUsers from './details/likecommentusers';\nimport LikePostsUsers from './details/likepostusers';\nimport ImageList from './details/ImageList';\nimport { Axios } from 'axios';\nimport { Rating } from 'semantic-ui-react';\nimport RecommendedProducts from './details/RecommendedProducts';\nimport RecentlyViewedProducts from './details/RecentlyViewedProducts';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Details = () => {\n  _s();\n\n  const user_id = DecodeToken(localStorage.getItem(\"access_token\")).user_id;\n  const navigate = useNavigate();\n  const location = useLocation();\n  const key = parseInt(location.pathname.slice(15));\n  const {\n    postDetails,\n    setPostDetails\n  } = useContext(PostContext);\n  const {\n    details,\n    loading\n  } = postDetails;\n  const [review, setReview] = useState();\n  const [quantity, setQuantity] = useState(null);\n  const [recommend, setRecommend] = useState([]);\n  const [likeData, setLikeData] = useState({\n    \"data\": null,\n    \"likes\": null,\n    \"status\": false\n  });\n  const ref = useRef();\n  let y = null;\n\n  const retrievePostDetails = async () => {\n    const fetchDetails = await AxiosRequest.get(`/shareme/posts/${key}/${user_id}`).then(res => {\n      setPostDetails({\n        loading: false,\n        details: res.data\n      });\n    }).catch(err => console.log(err));\n  };\n\n  const ReviewStars = number => {\n    if (number) {\n      setReview(number);\n    }\n  };\n\n  let RenderLikeUsers = null;\n\n  const GetLikePosts = async () => {\n    const post_like = AxiosRequest.get(`/shareme/posts/${key}/likes`).then(res => {\n      setLikeData({\n        \"data\": res.data.data,\n        \"likes\": res.data.likes,\n        \"status\": true\n      });\n    });\n  };\n\n  const UpdateLikePosts = async () => {\n    const post_like = AxiosRequest.post(`/shareme/posts/${key}/likes`, {\n      \"user_id\": user_id\n    }).then(res => {\n      setLikeData({\n        \"data\": res.data.data,\n        \"likes\": res.data.likes,\n        \"status\": true\n      });\n      retrievePostDetails();\n    });\n  };\n\n  const handleQuantity = async quantity => {\n    const {\n      seller,\n      title,\n      price,\n      id,\n      image,\n      category\n    } = postDetails.details;\n    const data = {\n      \"seller\": seller,\n      \"buyer\": user_id,\n      \"net_price\": price * quantity,\n      \"title\": title,\n      \"product\": id,\n      \"quantity\": quantity,\n      category: parseInt(category)\n    };\n    console.log(data);\n\n    if (data.quantity > 0) {\n      const prod_quantity = await AxiosRequest.post(`/shareme/cart/${user_id}`, data).then(res => {\n        console.log(res.data);\n      }).catch(err => {\n        console.log(err);\n      });\n      navigate(`/shareme/cart/${user_id}`);\n    } else {\n      alert(\"invalid quantity\");\n    }\n  };\n\n  useEffect(() => {\n    GetLikePosts();\n    retrievePostDetails();\n    window.scrollTo(0, 0);\n  }, []);\n\n  if (postDetails.loading === false) {\n    let likeIconStyle = \"outline\";\n    postDetails.details.likes.map(a => {\n      if (a === user_id) {\n        likeIconStyle = \"\";\n      }\n    });\n\n    const PostData = /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"d-flex\",\n      style: {\n        alignItems: \"center\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          fontSize: \"25px\"\n        },\n        children: postDetails.details.title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 25\n      }, this), /*#__PURE__*/_jsxDEV(\"i\", {\n        style: {\n          marginLeft: \"25px\"\n        },\n        class: `big thumbs up red ${likeIconStyle} icon`,\n        onClick: UpdateLikePosts\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 25\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          fontSize: \"20px\"\n        },\n        \"data-bs-toggle\": \"modal\",\n        \"data-bs-target\": \"#postlikeusersmodal\",\n        children: postDetails.details.likes.length\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 25\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: postDetails.details.content\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 25\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 22\n    }, this);\n\n    const Details = /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        margin: \"3%\",\n        fontSize: \"125%\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: postDetails.details.data\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 25\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        to: `/shareme/profile/${postDetails.details.author}`,\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"lead\",\n          children: postDetails.details.username\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 85\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 25\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 22\n    }, this);\n\n    const handleDropDownSelect = (event, data) => {\n      console.log(data.value);\n    };\n\n    const handleSaveLater = async () => {\n      console.log(\"savelater\");\n      const a = await AxiosRequest.post(`/shareme/savelater/${user_id}`, {\n        \"id\": postDetails.details.id,\n        \"buyer\": user_id\n      }).then(res => {\n        console.log(res.data);\n      }).catch(err => {\n        console.log(err.data);\n      });\n    };\n\n    const star = parseInt(postDetails.details.star);\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container row\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-md-5 mt-4\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"container mt-5\",\n            children: /*#__PURE__*/_jsxDEV(ImageList, {\n              props: postDetails.details\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 162,\n              columnNumber: 9\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 161,\n            columnNumber: 6\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          class: \" col-md-7 relative p-6 lg:overflow-y-auto md:overflow-y-auto\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              margin: \"2rem\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(Operations, {\n              props: postDetails\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 170,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(LikePostsUsers, {\n              props: likeData.data\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 171,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"font-semibold lg:text-3xl text-xl mb-3\",\n              children: postDetails.details.title\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 174,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"d-flex items-center mb-3 gap-2\",\n              children: [/*#__PURE__*/_jsxDEV(Rating, {\n                icon: \"star\",\n                defaultRating: \"4\",\n                maxRating: 5,\n                size: \"huge\",\n                clearable: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 177,\n                columnNumber: 13\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-xl font-bold\",\n                children: review\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 180,\n                columnNumber: 13\n              }, this), /*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"large red save icon\",\n                onClick: handleSaveLater\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 181,\n                columnNumber: 13\n              }, this), /*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"large red heart icon\",\n                onClick: handleSaveLater\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 182,\n                columnNumber: 13\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: likeData.data\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 183,\n                columnNumber: 13\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: likeData.likes\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 184,\n                columnNumber: 13\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: likeData.data\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 185,\n                columnNumber: 13\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 176,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-red-500 text-4xl\",\n              children: postDetails.details.price\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 191,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"d-flex gap-4 mt-3 items-center\",\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-1xl lg:text-2xl font-bold\",\n                children: \"Quantity\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 196,\n                columnNumber: 13\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                className: \"form-control w-20\",\n                onChange: e => {\n                  setQuantity(e.target.value);\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 197,\n                columnNumber: 13\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 194,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"d-flex mt-4 mb-4 items-center \",\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"black large shipping fast icon\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 203,\n                columnNumber: 14\n              }, this), /*#__PURE__*/_jsxDEV(Link, {\n                to: `/shareme/profile/${postDetails.details.seller}`,\n                children: /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-2xl\",\n                  children: postDetails.details.username\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 204,\n                  columnNumber: 74\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 204,\n                columnNumber: 14\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 202,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-lg mb-5\",\n              children: postDetails.details.content\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 207,\n              columnNumber: 14\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"d-grid\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn btn-dark btn-lg\",\n                onClick: () => handleQuantity(quantity),\n                children: \"Add To Cart\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 210,\n                columnNumber: 14\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 209,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 169,\n            columnNumber: 9\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 5\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(ReviewMangement, {\n        props: ReviewStars\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(RecommendedProducts, {\n        props: postDetails.details\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(RecentlyViewedProducts, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 5\n    }, this);\n  } else {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-5\",\n      children: /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 33\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 11\n    }, this);\n  }\n};\n\n_s(Details, \"aL6QfhBZde1+8GRtQblr/dX3BPw=\", false, function () {\n  return [useNavigate, useLocation];\n});\n\n_c = Details;\nexport default Details;\n\nvar _c;\n\n$RefreshReg$(_c, \"Details\");","map":{"version":3,"sources":["/home/saswat/Documents/Django/Shareme/frontend/src/Components/posts/details.js"],"names":["React","useState","useEffect","useRef","useLocation","useNavigate","Link","Loading","PostContext","useContext","AxiosRequest","ReviewMangement","Operations","DecodeToken","LikeCommentsUsers","LikePostsUsers","ImageList","Axios","Rating","RecommendedProducts","RecentlyViewedProducts","Details","user_id","localStorage","getItem","navigate","location","key","parseInt","pathname","slice","postDetails","setPostDetails","details","loading","review","setReview","quantity","setQuantity","recommend","setRecommend","likeData","setLikeData","ref","y","retrievePostDetails","fetchDetails","get","then","res","data","catch","err","console","log","ReviewStars","number","RenderLikeUsers","GetLikePosts","post_like","likes","UpdateLikePosts","post","handleQuantity","seller","title","price","id","image","category","prod_quantity","alert","window","scrollTo","likeIconStyle","map","a","PostData","alignItems","fontSize","marginLeft","length","content","margin","author","username","handleDropDownSelect","event","value","handleSaveLater","star","e","target"],"mappings":"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","sourcesContent":["import React, { useState,useEffect,useRef } from 'react';\nimport { useLocation,useNavigate } from 'react-router';\nimport { Link } from 'react-router-dom';\nimport Loading from '../basic/loading';\nimport { PostContext } from '../../app';\nimport { useContext } from 'react';\nimport AxiosRequest from '../../axios';\nimport ReviewMangement from './details/comments';\nimport Operations from './details/operations';\nimport { DecodeToken } from '../token_decode';\nimport LikeCommentsUsers from './details/likecommentusers';\nimport LikePostsUsers from './details/likepostusers';\nimport ImageList from './details/ImageList';\nimport { Axios } from 'axios';\nimport { Rating } from 'semantic-ui-react'\nimport RecommendedProducts from './details/RecommendedProducts';\nimport RecentlyViewedProducts from './details/RecentlyViewedProducts';\n\nconst Details = () => {\n\n    const user_id = DecodeToken(localStorage.getItem(\"access_token\")).user_id\n    const navigate = useNavigate();\n    const location = useLocation();\n    const key = parseInt(location.pathname.slice(15,))\n\n    const {postDetails,setPostDetails} = useContext(PostContext)\n    const {details,loading} = postDetails\n    const [review,setReview] = useState()\n    const[quantity,setQuantity] = useState(null);\n    const [recommend,setRecommend] = useState([])\n\n    const [likeData,setLikeData] = useState({\"data\":null,\"likes\":null,\"status\":false})\n    const ref = useRef()\n\n    \n\n    let y = null;\n    \n    const retrievePostDetails = async() => {\n        const fetchDetails = await AxiosRequest.get(`/shareme/posts/${key}/${user_id}`)\n                            .then((res) => {\n                                setPostDetails({loading:false,details:res.data});\n                            })\n                            .catch((err) => console.log(err))\n    }\n\n    const ReviewStars = (number) => {\n        if(number){\n            setReview(number);   \n        }\n    }\n\n\n    let RenderLikeUsers = null\n    \n    const GetLikePosts = async() => {\n        const post_like = AxiosRequest.get(`/shareme/posts/${key}/likes`)\n                            .then((res) => {\n                                setLikeData({\"data\":res.data.data,\"likes\":res.data.likes,\"status\":true})\n\n                            })\n    }\n\n    const UpdateLikePosts = async() => {\n        const post_like = AxiosRequest.post(`/shareme/posts/${key}/likes`,{\"user_id\":user_id})\n                            .then((res) => {\n                                setLikeData({\"data\":res.data.data,\"likes\":res.data.likes,\"status\":true})\n                                retrievePostDetails();\n                            })\n    }\n\n    const handleQuantity = async(quantity) => {\n        \n        const {seller,title,price,id,image,category} = postDetails.details\n        const data = {\"seller\":seller,\"buyer\":user_id,\"net_price\":price*quantity,\"title\":title,\"product\":id,\"quantity\":quantity,category:parseInt(category)}\n        console.log(data)\n        if(data.quantity>0){\n        const prod_quantity= await AxiosRequest.post(`/shareme/cart/${user_id}`,data)\n                            .then((res) => {console.log(res.data)})\n                            .catch((err) => {console.log(err)})\n\n        navigate(`/shareme/cart/${user_id}`);\n        }\n        else{\n            alert(\"invalid quantity\")\n        }\n    }\n\n\n   \n\n\n\n\n\n\n    useEffect(() => {\n        GetLikePosts();\n        retrievePostDetails();\n        window.scrollTo(0,0);   \n    }, []);\n\n\n    \n\n\n\n    if(postDetails.loading ===false){\n        let likeIconStyle = \"outline\"\n        postDetails.details.likes.map((a) => {\n            if(a === user_id){\n                likeIconStyle = \"\"\n            }\n        })\n    \n\n    const PostData = <div className='d-flex' style={{alignItems:\"center\"}}>\n                        <p style={{fontSize:\"25px\"}}>{postDetails.details.title}</p>\n                        <i style={{marginLeft:\"25px\"}} class={`big thumbs up red ${likeIconStyle} icon`} onClick={UpdateLikePosts}></i>\n                        <p style={{fontSize:\"20px\"}} data-bs-toggle=\"modal\" data-bs-target=\"#postlikeusersmodal\">{postDetails.details.likes.length}</p>\n                        <h3>{postDetails.details.content}</h3>\n                    </div>\n\n   \n    const Details =  <div style={{margin:\"3%\",fontSize:\"125%\"}}>\n                        <p>{postDetails.details.data}</p>\n                        <Link to={`/shareme/profile/${postDetails.details.author}`}><p className='lead'>{postDetails.details.username}</p></Link>\n                      </div>\n\n    \n\n    const handleDropDownSelect = (event, data) => {\n        console.log(data.value);\n    };\n\n\n    const handleSaveLater = async() => {\n        console.log(\"savelater\")\n\n        const a = await AxiosRequest.post(`/shareme/savelater/${user_id}`,{\"id\":postDetails.details.id,\"buyer\":user_id})\n                .then((res) => {console.log(res.data)})\n                .catch((err) => {console.log(err.data)})\n    }\n\n\n   \n\n\n\n    const star = parseInt(postDetails.details.star)\n\n    \n\n    return(  \n    <div className='container'>\n\n        \n    <div className='container row'>\n    <div className='col-md-5 mt-4'>\n    \n     <div className='container mt-5'>\n        <ImageList props={postDetails.details}/>        \n    </div>\n    </div>\n    \n\n    <div  class=\" col-md-7 relative p-6 lg:overflow-y-auto md:overflow-y-auto\">\n    \n        <div style={{margin:\"2rem\"}}>\n            <Operations props={postDetails}/> \n            <LikePostsUsers props={likeData.data}/>   \n         \n           \n            <p className='font-semibold lg:text-3xl text-xl mb-3'>{postDetails.details.title}</p>\n\n            <div className='d-flex items-center mb-3 gap-2'>\n            <Rating icon='star' defaultRating=\"4\" maxRating={5} size='huge' clearable/>\n\n           \n            <p className='text-xl font-bold'>{review}</p>\n            <i className='large red save icon' onClick={handleSaveLater}></i>\n            <i className='large red heart icon' onClick={handleSaveLater}></i>\n            <p>{likeData.data}</p>\n            <p>{likeData.likes}</p>\n            <p>{likeData.data}</p>\n            \n            \n            \n            </div>\n        \n            <p className='text-red-500 text-4xl'>{postDetails.details.price}</p>\n            \n\n            <div className='d-flex gap-4 mt-3 items-center'>\n\n            <p className='text-1xl lg:text-2xl font-bold'>Quantity</p>\n            <input type=\"number\" className='form-control w-20' onChange={(e) => {setQuantity(e.target.value)}} ></input>\n            </div>\n\n            \n\n            <div className='d-flex mt-4 mb-4 items-center '>\n             <i className='black large shipping fast icon'></i>\n             <Link to={`/shareme/profile/${postDetails.details.seller}`}><p className='text-2xl'>{postDetails.details.username}</p></Link>\n             </div>\n\n             <p className='text-lg mb-5'>{postDetails.details.content}</p>\n\n            <div className='d-grid'>\n             <button className='btn btn-dark btn-lg' onClick={() => handleQuantity(quantity)}>Add To Cart</button>\n             </div>\n        </div>\n        \n    </div>\n    </div>\n\n    <ReviewMangement props={ReviewStars}/>\n\n   \n    <RecommendedProducts props={postDetails.details}/>\n\n    <RecentlyViewedProducts/>\n\n   \n   \n    </div>\n  );}\n  \n  else{\n      return(\n          <div className='mb-5'><Loading/></div>\n      )\n  }\n   \n};\n\nexport default Details;\n\n\n\n\n\n\n\n\n\n"]},"metadata":{},"sourceType":"module"}